(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{421:function(t,_,v){"use strict";v.r(_);var e=v(41),r=Object(e.a)({},(function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"_3-镜像命令"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-镜像命令"}},[t._v("#")]),t._v(" 3.镜像命令")]),t._v(" "),v("ul",[v("li",[t._v("Docker 把应用程序及其依赖，打包在 image 文件里面。只有通过这个文件，才能生成 Docker 容器")]),t._v(" "),v("li",[t._v("image 文件可以看作是容器的模板")]),t._v(" "),v("li",[t._v("Docker 根据 image 文件生成容器的实例")]),t._v(" "),v("li",[t._v("同一个 image 文件，可以生成多个同时运行的容器实例")]),t._v(" "),v("li",[t._v("镜像不是一个单一的文件，而是有多层")]),t._v(" "),v("li",[t._v("容器其实就是在镜像的最上面加了一层读写层，在运行容器里做的任何文件改动，都会写到这个读写层里。如果容器删除了，最上面的读写层也就删除了，改动也就丢失了")]),t._v(" "),v("li",[t._v("我们可以通过 docker history <ID/NAME> 查看镜像中各层内容及大小，每层对应着 Dockerfile 中的一条指令")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("命令")]),t._v(" "),v("th",[t._v("含义")]),t._v(" "),v("th",[t._v("语法")]),t._v(" "),v("th",[t._v("案例")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("ls")]),t._v(" "),v("td",[t._v("查看全部镜像")]),t._v(" "),v("td",[t._v("docker image ls")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("search")]),t._v(" "),v("td",[t._v("查找镜像")]),t._v(" "),v("td",[t._v("docker search [imageName]")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("history")]),t._v(" "),v("td",[t._v("查看镜像历史")]),t._v(" "),v("td",[t._v("docker history [imageName]")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("inspect")]),t._v(" "),v("td",[t._v("显示一个或多个镜像详细信息")]),t._v(" "),v("td",[t._v("docker inspect [imageName]")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("pull")]),t._v(" "),v("td",[t._v("拉取镜像")]),t._v(" "),v("td",[t._v("docker pull [imageName]")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("push")]),t._v(" "),v("td",[t._v("推送一个镜像到镜像仓库")]),t._v(" "),v("td",[t._v("docker push [imageName]")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("rmi")]),t._v(" "),v("td",[t._v("删除镜像")]),t._v(" "),v("td",[t._v("docker rmi [imageName] docker image rmi 2")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("prune")]),t._v(" "),v("td",[t._v("移除未使用的镜像，没有标记或补任何容器引用")]),t._v(" "),v("td",[t._v("docker image prune")]),t._v(" "),v("td",[t._v("docker image prune")])]),t._v(" "),v("tr",[v("td",[t._v("tag")]),t._v(" "),v("td",[t._v("标记本地镜像，将其归入某一仓库")]),t._v(" "),v("td",[t._v("docker tag [OPTIONS] IMAGE[:TAG][registryhost/][USERNAME/]NAME[:TAG]")]),t._v(" "),v("td",[t._v("docker tag centos:7 zhangrenyang/centos:v1")])]),t._v(" "),v("tr",[v("td",[t._v("export")]),t._v(" "),v("td",[t._v("将容器文件系统作为一个 tar 归档文件导出到 STDOUT")]),t._v(" "),v("td",[t._v("docker export [OPTIONS] CONTAINER")]),t._v(" "),v("td",[t._v("docker export -o hello-world.tar b2712f1067a3")])]),t._v(" "),v("tr",[v("td",[t._v("import")]),t._v(" "),v("td",[t._v("导入容器快照文件系统 tar 归档文件并创建镜像")]),t._v(" "),v("td",[t._v("docker import [OPTIONS] file/URL/- [REPOSITORY[:TAG]]")]),t._v(" "),v("td",[t._v("docker import hello-world.tar")])]),t._v(" "),v("tr",[v("td",[t._v("save")]),t._v(" "),v("td",[t._v("将指定镜像保存成 tar 文件")]),t._v(" "),v("td",[t._v("docker save [OPTIONS] IMAGE [IMAGE...]")]),t._v(" "),v("td",[t._v("docker save -o hello-world.tar hello-world:latest")])]),t._v(" "),v("tr",[v("td"),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",[t._v("load")]),t._v(" "),v("td",[t._v("加载 tar 文件并创建镜像")]),t._v(" "),v("td"),t._v(" "),v("td",[t._v("docker load -i hello-world.tar")])]),t._v(" "),v("tr",[v("td",[t._v("build")]),t._v(" "),v("td",[t._v("根据 Dockerfile 构建镜像")]),t._v(" "),v("td",[t._v("docker build [OPTIONS] PATH / URL / -")]),t._v(" "),v("td",[t._v("docker build -t zf/ubuntu:v1 .")])])])]),t._v(" "),v("ul",[v("li",[t._v("用户既可以使用 docker load 来导入镜像存储文件到本地镜像库，也可以使用 docker import 来导入一个容器快照到本地镜像库")]),t._v(" "),v("li",[t._v("这两者的区别在于容器(import)快照文件将丢弃所有的历史记录和元数据信息（即仅保存容器当时的快照状态），而镜像(load)存储文件将保存完整记录，体积也要大")]),t._v(" "),v("li",[t._v("此外，从容器(import)快照文件导入时可以重新指定标签等元数据信息")])]),t._v(" "),v("h2",{attrs:{id:"_3-1-查看镜像"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-查看镜像"}},[t._v("#")]),t._v(" 3.1 查看镜像")]),t._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[t._v(" docker image "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n")])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("字段")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("REPOSITORY")]),t._v(" "),v("td",[t._v("仓库地址")])]),t._v(" "),v("tr",[v("td",[t._v("TAG")]),t._v(" "),v("td",[t._v("标签")])]),t._v(" "),v("tr",[v("td",[t._v("IMAGE_ID")]),t._v(" "),v("td",[t._v("镜像 ID")])]),t._v(" "),v("tr",[v("td",[t._v("CREATED")]),t._v(" "),v("td",[t._v("创建时间")])]),t._v(" "),v("tr",[v("td",[t._v("SIZE")]),t._v(" "),v("td",[t._v("镜像大小")])])])]),t._v(" "),v("h2",{attrs:{id:"_3-2-查找镜像"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-查找镜像"}},[t._v("#")]),t._v(" 3.2 查找镜像")]),t._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[t._v(" docker search ubuntu\n")])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("字段")]),t._v(" "),v("th",[t._v("含义")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("NAME")]),t._v(" "),v("td",[t._v("名称")])]),t._v(" "),v("tr",[v("td",[t._v("DESCRIPTION")]),t._v(" "),v("td",[t._v("描述")])]),t._v(" "),v("tr",[v("td",[t._v("STARTS")]),t._v(" "),v("td",[t._v("星星的数量")])]),t._v(" "),v("tr",[v("td",[t._v("OFFICIAL")]),t._v(" "),v("td",[t._v("是否官方源")])])])]),t._v(" "),v("h2",{attrs:{id:"_3-3-拉取镜像"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-拉取镜像"}},[t._v("#")]),t._v(" 3.3 拉取镜像")]),t._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[t._v("docker pull docker.io/hello-world\n")])])]),v("ul",[v("li",[t._v("docker image pull 是抓取 image 文件的命令")]),t._v(" "),v("li",[t._v("docker.io/hello-world 是 image 文件在仓库里面的位置，其中 "),v("code",[t._v("docker.io")]),t._v(" 是 image 的作者，hello-world 是 image 文件的名字")]),t._v(" "),v("li",[t._v("Docker 官方提供的 image 文件，都放在 "),v("code",[t._v("docker.io")]),t._v(" 组里面，所以它的是默认组，可以省略"),v("code",[t._v("docker image pull hello-world")])])]),t._v(" "),v("h2",{attrs:{id:"_3-4-删除镜像"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-删除镜像"}},[t._v("#")]),t._v(" 3.4 删除镜像")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("docker rmi hello-world\n")])])])])}),[],!1,null,null,null);_.default=r.exports}}]);