(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{426:function(n,s,t){"use strict";t.r(s);var a=t(41),e=Object(a.a)({},(function(){var n=this,s=n.$createElement,t=n._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"_8-网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-网络"}},[n._v("#")]),n._v(" 8.网络")]),n._v(" "),t("ul",[t("li",[n._v("安装Docker时，它会自动创建三个网络，bridge（创建容器默认连接到此网络）、 none 、host\n"),t("ul",[t("li",[n._v("None：该模式关闭了容器的网络功能,对外界完全隔离")]),n._v(" "),t("li",[n._v("host：容器将不会虚拟出自己的网卡，配置自己的IP等，而是使用宿主机的IP和端口。")]),n._v(" "),t("li",[n._v("bridge 桥接网络，此模式会为每一个容器分配IP")])])]),n._v(" "),t("li",[n._v("可以使用该--network标志来指定容器应连接到哪些网络")])]),n._v(" "),t("h2",{attrs:{id:"_8-1-bridge-桥接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-bridge-桥接"}},[n._v("#")]),n._v(" 8.1 bridge（桥接）")]),n._v(" "),t("ul",[t("li",[n._v("bridge网络代表所有Docker安装中存在的网络")]),n._v(" "),t("li",[n._v("除非你使用该"),t("code",[n._v("docker run --network=<NETWORK>")]),n._v("选项指定，否则Docker守护程序默认将容器连接到此网络")]),n._v(" "),t("li",[n._v("bridge模式使用 "),t("code",[n._v("--net=bridge")]),n._v("指定，默认设置")])]),n._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[n._v("docker network "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("ls")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#列出当前的网络")]),n._v("\ndocker inspect bridge "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#查看当前的桥连网络")]),n._v("\ndocker run -d --name nginx1 nginx\ndocker run -d --name nginx2 --link nginx1 nginx\ndocker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("exec")]),n._v(" -it nginx2 "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("bash")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" update\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" -y inetutils-ping  "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#ping")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" -y dnsutils        "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#nslookup")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" -y net-tools       "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#ifconfig")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" -y iproute2        "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#ip")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" -y "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("curl")]),n._v("            "),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#curl")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("cat")]),n._v(" /etc/hosts\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("ping")]),n._v(" nginx1\n")])])]),t("h2",{attrs:{id:"_8-2-none"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-none"}},[n._v("#")]),n._v(" 8.2 none")]),n._v(" "),t("ul",[t("li",[n._v("none模式使用 "),t("code",[n._v("--net=none")]),n._v(" 指定")])]),n._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# --net 指定无网络")]),n._v("\ndocker run -d --name nginx_none --net none nginx\ndocker inspect none\ndocker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("exec")]),n._v(" -it nginx_none "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("bash")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("ip")]),n._v(" addr\n")])])]),t("h2",{attrs:{id:"_8-3-host"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-host"}},[n._v("#")]),n._v(" 8.3 host")]),n._v(" "),t("ul",[t("li",[n._v("host模式使用 "),t("code",[n._v("--net=host")]),n._v(" 指定")])]),n._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[n._v("docker run -d --name nginx_host --net "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("host")]),n._v(" nginx\ndocker inspect "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("host")]),n._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("exec")]),n._v(" -it nginx_host "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("bash")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("ip")]),n._v(" addr\n")])])]),t("h2",{attrs:{id:"_8-4-端口映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-4-端口映射"}},[n._v("#")]),n._v(" 8.4 端口映射")]),n._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 查看镜像里暴露出的端口号")]),n._v("\ndocker image inspect nginx\n"),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('"ExposedPorts"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v(":")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('"80/tcp"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v(":")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 让宿主机的8080端口映射到docker容器的80端口")]),n._v("\ndocker run -d --name port_nginx -p "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("8080")]),n._v(":80  nginx\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 查看主机绑定的端口")]),n._v("\ndocker container port port_nginx\n")])])]),t("h2",{attrs:{id:"_8-5-指向主机的随机端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-5-指向主机的随机端口"}},[n._v("#")]),n._v(" 8.5 指向主机的随机端口")]),n._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[n._v("docker run -d --name random_nginx --publish "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),n._v(" nginx\ndocker port random_nginx\n\ndocker run -d --name randomall_nginx --publish-all nginx\ndocker run -d --name randomall_nginx --P nginx\n")])])]),t("h2",{attrs:{id:"_8-6-创建自定义网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-6-创建自定义网络"}},[n._v("#")]),n._v(" 8.6 创建自定义网络")]),n._v(" "),t("ul",[t("li",[n._v("可以创建多个网络，每个网络IP范围均不相同")]),n._v(" "),t("li",[n._v("docker的自定义网络里面有一个DNS服务，可以通过容器名称访问主机")])]),n._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 创建自定义网络")]),n._v("\ndocker network create --driver bridge myweb\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 查看自定义网络中的主机")]),n._v("\ndocker network inspect myweb\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 创建容器的时候指定网络")]),n._v("\ndocker run -d --name mynginx1  --net myweb nginx\ndocker run -d --name mynginx2  --net myweb nginx\ndocker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("exec")]),n._v(" -it mynginx2 "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("bash")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("ping")]),n._v(" mynginx1\n")])])]),t("h2",{attrs:{id:"_8-7-连接到指定网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-7-连接到指定网络"}},[n._v("#")]),n._v(" 8.7 连接到指定网络")]),n._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[n._v("docker run -d --name mynginx3   nginx\ndocker network connect  myweb mynginx3\ndocker network disconnect myweb mynginx3\n")])])]),t("h2",{attrs:{id:"_8-8-移除网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-8-移除网络"}},[n._v("#")]),n._v(" 8.8 移除网络")]),n._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[n._v("docker network "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("rm")]),n._v(" myweb\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);